{% extends "base.html" %}

{# 1. é‡å†™ title blockï¼Œä¸ºé¡µé¢è®¾ç½®ä¸€ä¸ªå…·ä½“çš„æ ‡é¢˜ #}
{% block title %}æ¨¡å—: {{ module.name }} - æµ‹è¯•ç®¡ç†å¹³å°{% endblock %}

{# 2. å°†æ‰€æœ‰é¡µé¢ç‹¬æœ‰çš„å†…å®¹æ”¾å…¥ content block ä¸­ #}
{% block content %}
    <!-- é¢åŒ…å±‘å¯¼èˆª -->
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{{ url_for('index') }}">é¦–é¡µ</a></li>
            <li class="breadcrumb-item"><a href="{{ url_for('view_project', project_id=module.project.id) }}">{{ module.project.name }}</a></li>
            <li class="breadcrumb-item active" aria-current="page">{{ module.name }}</li>
        </ol>
    </nav>

    <!-- é¡µé¢æ ‡é¢˜å’Œæ“ä½œæŒ‰é’® -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="h2">ğŸ“¦ æ¨¡å—: {{ module.name }}</h1>
        <a href="{{ url_for('add_userstory', module_id=module.id) }}" class="btn btn-primary">
            <i class="bi bi-plus-lg"></i> æ·»åŠ æ–°ç”¨æˆ·æ•…äº‹
        </a>
    </div>

    <!-- ç”¨æˆ·æ•…äº‹åˆ—è¡¨ -->
    <div class="list-group">
        {% for us in module.user_stories %}
        <a href="{{ url_for('view_userstory', userstory_id=us.id) }}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
            <div>
                <i class="bi bi-file-text me-2"></i>
                <strong>{{ us.title }}</strong>
                <p class="mb-0 text-muted small">{{ us.description|truncate(100) }}</p>
            </div>
            <span class="badge bg-secondary rounded-pill">{{ us.test_cases|length }} ä¸ªæµ‹è¯•ç”¨ä¾‹</span>
        </a>
        {% else %}
        <!-- å½“æ²¡æœ‰ç”¨æˆ·æ•…äº‹æ—¶æ˜¾ç¤º -->
        <div class="list-group-item text-center p-4">
            <p class="mb-2 text-muted">è¯¥æ¨¡å—ä¸‹è¿˜æ²¡æœ‰ç”¨æˆ·æ•…äº‹ã€‚</p>
            <p>ç‚¹å‡»å³ä¸Šè§’çš„ "<strong>æ·»åŠ æ–°ç”¨æˆ·æ•…äº‹</strong>" æŒ‰é’®æ¥åˆ›å»ºç¬¬ä¸€ä¸ªå§ï¼</p>
        </div>
        {% endfor %}
    </div>

{% endblock %}

{#
   è¿™ä¸ªé¡µé¢ä¸éœ€è¦é¢å¤–çš„ CSS æˆ– JavaScriptï¼Œ
   æ‰€ä»¥ block head_extra å’Œ block scripts æ˜¯å¯é€‰çš„ï¼Œå¯ä»¥ä¸å†™ã€‚
   base.html ä¸­çš„å…¬å…± JS å’Œ CSS ä¼šè‡ªåŠ¨è¢«åŒ…å«ã€‚
#}